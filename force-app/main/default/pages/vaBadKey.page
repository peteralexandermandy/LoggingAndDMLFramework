<apex:page >
  <h1>EDGE simulated with a Missing Encryption Key</h1>
   
<!-- Can remove these tags: Loaded in JavaScript below -->   
<link rel="stylesheet" href="/resource/LIVECHAT_EDGE_CSS"></link>
<script type='text/javascript' src="/resource/LIVECHAT_PARAMETERS"/>
<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<!-- Can remove these tags -->
<script type='text/javascript'>
    var initESW = function(gslbBaseURL) {
        // Example Values are encrpyted using a specific AES256 private key
        var vFrstName        = 'XX9Azr5HeCbrkTbo6riH5TTQ==';
        var vLastName        = 'XXkMHKylCugkgLXwRQF3KKsw==';
        var vEmail           = 'XXpncosATCk0DJw6NGVyT0XxMyOSiHv7BzV777igKSKEI=';
        var vState           = 'XXI2lF9jx6FHvyxnxXMN4H7A==';
        var vPolicyNumber    = 'XXg35kDg9g8UV3+xOj2qHrLg==';
        var vClientID        = 'XXzC1GTZmejExUR3cCD8CSeA==';
        var vURL             = window.location.href + '?token=fake_token';
        var vLanguage        = 'en_US'; 
        var vApplication     = 'EDGE';
        
        embedded_svc.settings.extraPrechatFormDetails = [
        {"label":"Encrypted First Name", "value": vFrstName, "transcriptFields": ["Encrypted_First_Name__c"]},
        {"label":"Encrypted Last Name", "value": vLastName, "transcriptFields": ["Encrypted_Last_Name__c"]},
        {"label":"Encrypted Email", "value": vEmail, "transcriptFields": ["Encrypted_Email__c"]},
        {"label":"Encrypted State", "value": vState, "transcriptFields": ["Encrypted_State__c"]},
        {"label":"Encrypted Policy Number", "value": vPolicyNumber, "transcriptFields": ["Encrypted_Policy_Number__c"]},
        {"label":"Encrypted Client ID", "value": vClientID, "transcriptFields": ["Encrypted_Client_ID__c"]},
        {"label":"URL", "value": vURL, "transcriptFields": ["URL__c"]},
        {"label":"Language", "value": vLanguage, "transcriptFields": ["Language__c"]},
        {"label":"Application", "value": vApplication, "transcriptFields": ["Application__c"]}
        ];
    
        embedded_svc.settings.displayHelpButton = true; //Or false
        embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'
        embedded_svc.settings.enabledFeatures = ['LiveAgent'];
        embedded_svc.settings.entryFeature = 'LiveAgent';
        embedded_svc.settings.externalStyles = ['https://dev-geico.cs22.force.com/resource/LIVECHAT_CSS'];

        embedded_svc.init(
            LIVECHAT_PARAMETERS_EDGE.instanceUrl,
            LIVECHAT_PARAMETERS_EDGE.pageUrl,
            gslbBaseURL,
            LIVECHAT_PARAMETERS_EDGE.orgId,
            LIVECHAT_PARAMETERS_EDGE.botName,
            {
                baseLiveAgentContentURL: LIVECHAT_PARAMETERS_EDGE.chatParameters.baseLiveAgentContentURL,
                deploymentId: LIVECHAT_PARAMETERS_EDGE.chatParameters.deploymentId,
                buttonId: LIVECHAT_PARAMETERS_EDGE.chatParameters.buttonId,
                baseLiveAgentURL: LIVECHAT_PARAMETERS_EDGE.chatParameters.baseLiveAgentURL,
                eswLiveAgentDevName: LIVECHAT_PARAMETERS_EDGE.chatParameters.eswLiveAgentDevName,
                isOfflineSupportEnabled: LIVECHAT_PARAMETERS_EDGE.chatParameters.isOfflineSupportEnabled
            }
        );
        
    };

    if (!window.embedded_svc) {
        var sLiveChatParams = document.createElement('script');
        sLiveChatParams.setAttribute('src', '/resource/LIVECHAT_PARAMETERS');
        sLiveChatParams.onload = function() {
            var s = document.createElement('script');
            s.setAttribute('src', LIVECHAT_PARAMETERS_EDGE.instanceUrl + '/embeddedservice/5.0/esw.min.js');
            s.onload = function() {            
                var sLiveChatCSS = document.createElement('link');    
                sLiveChatCSS.setAttribute("rel", "stylesheet");
                sLiveChatCSS.setAttribute('type', 'text/css');
                sLiveChatCSS.setAttribute('href', '/resource/LIVECHAT_EDGE_CSS');
                sLiveChatCSS.onload = function() {
                    initESW(null);
                };
                document.body.appendChild(sLiveChatCSS);         
            };
            document.body.appendChild(s);         
        };
        document.body.appendChild(sLiveChatParams);
    } else {
        initESW('https://service.force.com');
    }
</script>

</apex:page>